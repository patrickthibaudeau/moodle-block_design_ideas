{"version":3,"file":"ai_policy.min.js","sources":["../src/ai_policy.js"],"sourcesContent":["import ModalSaveCancel from 'core/modal_save_cancel';\nimport ModalEvents from 'core/modal_events';\nimport {get_string as getString} from 'core/str';\nimport ajax from 'core/ajax';\n\nexport const init = async () => {\n    // Get element with id ai-policy-status\n    const policyStatus = document.getElementById('ai-policy-status');\nconsole.log('policyStatus', policyStatus.value);\n    // Show modal pop-up for poliucy acceptance if policyStatus is empty\n    if (policyStatus.value === '0') {\n        const modal = await ModalSaveCancel.create({\n            title: getString('aipolicyacceptance', 'ai'),\n            body: getString('userpolicy', 'ai'),\n            large: true,\n            buttons: {\n                'save': getString('acceptai', 'ai'),\n                'cancel': getString('declineaipolicy', 'ai'),\n            },\n            show: true,\n        });\n\n        modal.getRoot().on(ModalEvents.save, (e) => {\n            // Get context id element\n            const contextId = document.getElementById('contextid');\n            // Set policy status\n            const setPolicyStatus = ajax.call([{\n                methodname: 'core_ai_set_policy_status',\n                args: {\n                    contextid: contextId.value,\n                },\n            }]);\n\n            // Refresh the page\n            setPolicyStatus[0].done(() => {\n                window.location.reload();\n            }).fail((error) => {\n                console.error('Error setting policy status:', error);\n            });\n        })\n    }\n};"],"names":["async","policyStatus","document","getElementById","console","log","value","ModalSaveCancel","create","title","body","large","buttons","show","getRoot","on","ModalEvents","save","e","contextId","ajax","call","methodname","args","contextid","done","window","location","reload","fail","error"],"mappings":"yfAKoBA,gBAEVC,aAAeC,SAASC,eAAe,uBACjDC,QAAQC,IAAI,eAAgBJ,aAAaK,OAEV,MAAvBL,aAAaK,MAAe,QACRC,2BAAgBC,OAAO,CACvCC,OAAO,mBAAU,qBAAsB,MACvCC,MAAM,mBAAU,aAAc,MAC9BC,OAAO,EACPC,QAAS,OACG,mBAAU,WAAY,cACpB,mBAAU,kBAAmB,OAE3CC,MAAM,KAGJC,UAAUC,GAAGC,sBAAYC,MAAOC,UAE5BC,UAAYjB,SAASC,eAAe,aAElBiB,cAAKC,KAAK,CAAC,CAC/BC,WAAY,4BACZC,KAAM,CACFC,UAAWL,UAAUb,UAKb,GAAGmB,MAAK,KACpBC,OAAOC,SAASC,YACjBC,MAAMC,QACL1B,QAAQ0B,MAAM,+BAAgCA"}