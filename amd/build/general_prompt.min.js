define("block_design_ideas/general_prompt",["exports","core/modal","core/str","core/ajax","core/templates"],(function(_exports,_modal,_str,_ajax,_templates){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_modal=_interopRequireDefault(_modal),_ajax=_interopRequireDefault(_ajax),_templates=_interopRequireDefault(_templates);_exports.init=async()=>{document.addEventListener("click",(function(event){if(event.target.classList.contains("block-design-ideas-btn-ai-call")){var clickedElement=event.target,promptId=clickedElement.getAttribute("data-prompt_id"),courseId=clickedElement.getAttribute("data-course_id"),name=clickedElement.getAttribute("data-name");_modal.default.create({title:"",body:_templates.default.render("block_design_ideas/loader",{}),large:!1}).then((function(modal){modal.show();var loaderModal=modal;_ajax.default.call([{methodname:"block_design_ideas_get_generic_content",args:{courseid:courseId,promptid:promptId}}])[0].done((function(results){loaderModal.hide(),results.name=name,_modal.default.create({title:(0,_str.get_string)("generated_content","block_design_ideas"),body:_templates.default.render("block_design_ideas/ai_call",results),large:!0}).then((function(modal){modal.show(),setTimeout((function(){var copyButton=document.querySelector(".block-design-ideas-btn-copy-to-clipboard");copyButton&&copyButton.addEventListener("click",(function(){var content=document.getElementById("block-design-ideas-content");content&&navigator.clipboard.writeText(content.innerText).then((function(){(0,_str.get_string)("copied_to_clipboard","block_design_ideas").then((function(message){alert(message)}))}),(function(){(0,_str.get_string)("copy_to_clipboard_failed","block_design_ideas").then((function(message){alert(message)}))}))}))}),1e3)}))})).fail((function(){alert("An error has occurred. Cannot display data")}))}))}}))}}));

//# sourceMappingURL=general_prompt.min.js.map