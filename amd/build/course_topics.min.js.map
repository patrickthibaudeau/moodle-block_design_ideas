{"version":3,"file":"course_topics.min.js","sources":["../src/course_topics.js"],"sourcesContent":["import ModalFactory from 'core/modal_factory';\nimport {get_string as getString} from 'core/str';\nimport ajax from 'core/ajax';\nimport Templates from 'core/templates';\n\nexport const init = async () => {\n    // Check if the button exists before adding the event listener\n    const button = document.getElementsByClassName('block-design-ideas-btn-ai-call')[0];\n    document.addEventListener('click', function(event) {\n\n\n        if (event.target.classList.contains('block-design-ideas-btn-ai-call')) {\n            var clickedElement = event.target;\n            // Get the data attributes\n            var promptId = clickedElement.getAttribute('data-prompt_id');\n            var numberOfTopics = clickedElement.getAttribute('data-topics');\n            var courseId = clickedElement.getAttribute('data-course_id');\n\n            ModalFactory.create({\n                title: '',\n                body: Templates.render('block_design_ideas/loader', {}),\n                large: false\n            }).then(function (modal) {\n                modal.show();\n                var loaderModal = modal;\n\n                var get_topics = ajax.call([{\n                    methodname: 'block_design_ideas_get_course_topics',\n                    args: {\n                        'courseid': courseId,\n                        'promptid': promptId,\n                        'number_of_topics': numberOfTopics\n                    }\n                }]);\n\n                get_topics[0].done(function (results) {\n\n                    // Convert results into a JSON object\n                    // var data = JSON.parse(results);\n                    console.log('results', results);\n\n                    // Close the modal\n                    loaderModal.hide();\n\n                    // Show results.generatedcontent in a modal\n                    ModalFactory.create({\n                        title: 'Generated Topics',\n                        body: Templates.render('block_design_ideas/course_topics', results),\n                        large: true\n                    }).then(function (modal) {\n                        modal.show();\n                    });\n\n\n                }).fail(function () {\n                    alert('An error has occurred. Cannot display data');\n                });\n            });\n        }\n    });\n};"],"names":["async","document","getElementsByClassName","addEventListener","event","target","classList","contains","clickedElement","promptId","getAttribute","numberOfTopics","courseId","create","title","body","Templates","render","large","then","modal","show","loaderModal","ajax","call","methodname","args","done","results","console","log","hide","fail","alert"],"mappings":"ieAKoBA,UAEDC,SAASC,uBAAuB,kCAAkC,GACjFD,SAASE,iBAAiB,SAAS,SAASC,UAGpCA,MAAMC,OAAOC,UAAUC,SAAS,kCAAmC,KAC/DC,eAAiBJ,MAAMC,OAEvBI,SAAWD,eAAeE,aAAa,kBACvCC,eAAiBH,eAAeE,aAAa,eAC7CE,SAAWJ,eAAeE,aAAa,yCAE9BG,OAAO,CAChBC,MAAO,GACPC,KAAMC,mBAAUC,OAAO,4BAA6B,IACpDC,OAAO,IACRC,MAAK,SAAUC,OACdA,MAAMC,WACFC,YAAcF,MAEDG,cAAKC,KAAK,CAAC,CACxBC,WAAY,uCACZC,KAAM,UACUd,kBACAH,0BACQE,mBAIjB,GAAGgB,MAAK,SAAUC,SAIzBC,QAAQC,IAAI,UAAWF,SAGvBN,YAAYS,8BAGClB,OAAO,CAChBC,MAAO,mBACPC,KAAMC,mBAAUC,OAAO,mCAAoCW,SAC3DV,OAAO,IACRC,MAAK,SAAUC,OACdA,MAAMC,aAIXW,MAAK,WACJC,MAAM"}